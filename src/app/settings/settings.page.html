<ion-header>
  <ion-toolbar>
    <ion-title class="header-title">Profile</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/learning" class="learning-button">
        <ion-icon name="school-outline" slot="icon-only"></ion-icon>
      </ion-button>
      <ion-button routerLink="/profile" class="profile-button">
        <ion-icon name="person-circle-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding-horizontal">
  <div class="page-settings">

  <!-- Profile Information Card -->
  <div class="profile-info-card ion-padding">
    <div class="profile-header">
      <ion-icon name="person-circle-outline" class="profile-avatar"></ion-icon>
      <div class="profile-details">
        <h2 class="profile-name">{{ userName }}</h2>
        <p class="profile-email">{{ userEmail }}</p>
      </div>
    </div>
    <ion-button
      expand="block"
      fill="outline"
      class="edit-profile-btn"
      routerLink="/profile">
      <ion-icon name="person-outline" slot="start"></ion-icon>
      View Profile
    </ion-button>
    <ion-button
      expand="block"
      fill="clear"
      class="edit-profile-btn-secondary"
      (click)="editProfile()">
      <ion-icon name="create-outline" slot="start"></ion-icon>
      Quick Edit
    </ion-button>
  </div>

  <!-- Device Connection Card -->
  <p class="section-title">Device Connection</p>
  <div class="device-connection-card ion-padding">
    <div class="card-status-area">
      <ion-icon
        name="bluetooth"
        class="bluetooth-icon"
        [ngClass]="{
          'is-connected': bluetoothStatus === 'Connected',
          'is-scanning': bluetoothStatus === 'Scanning'
        }">
      </ion-icon>

      <h3>{{ bluetoothStatus }}</h3>
      <p>{{ statusMessage }}</p>
    </div>

    <ion-button
      expand="block"
      color="warning"
      class="start-pairing-btn"
      (click)="startPairing()"
      [disabled]="bluetoothStatus === 'Scanning'">
      Start Pairing
    </ion-button>
  </div>

  <!-- Preferences Section -->
  <p class="section-title">Preferences</p>
  <div class="preferences-card">
    <div class="dark-mode-toggle-section">
      <div class="dark-mode-header">
        <div class="dark-mode-info">
          <h4>Dark Mode</h4>
          <p class="dark-mode-description">Switch between light and dark appearance</p>
        </div>
        <ion-toggle
          [checked]="isDarkMode"
          (ionChange)="toggleDarkMode($event)"
          mode="ios">
        </ion-toggle>
      </div>
    </div>
  </div>

  <!-- Account Actions -->
  <p class="section-title">Account</p>
  <div class="account-actions-card">
    <ion-button
      expand="block"
      color="danger"
      class="logout-btn"
      (click)="logout()">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Logout
    </ion-button>
  </div>

  </div><!-- /.page-settings -->
</ion-content>

<!-- Footer Navigation -->
<ion-footer>
  <ion-tab-bar slot="bottom" class="custom-tab-bar">

    <!-- Control = /home -->
    <ion-tab-button tab="home" routerLink="/home">
      <ion-icon name="bulb-outline"></ion-icon>
      <ion-label>Control</ion-label>
    </ion-tab-button>

    <!-- Patterns = /pattern -->
    <ion-tab-button tab="pattern" routerLink="/pattern">
      <ion-icon name="play-outline"></ion-icon>
      <ion-label>Patterns</ion-label>
    </ion-tab-button>

    <!-- Learning = /learning -->
    <ion-tab-button tab="learning" routerLink="/learning">
      <ion-icon name="school-outline"></ion-icon>
      <ion-label>Learning</ion-label>
    </ion-tab-button>

    <!-- System = /settings -->
    <ion-tab-button tab="settings" routerLink="/settings" class="active-tab">
      <div class="tab-active-bg">
        <ion-icon name="settings-outline"></ion-icon>
        <ion-label>System</ion-label>
      </div>
    </ion-tab-button>

  </ion-tab-bar>
</ion-footer>
